"use strict";(self.webpackChunkpersonal_finance_app=self.webpackChunkpersonal_finance_app||[]).push([[875],{875:(e,s,t)=>{t.r(s),t.d(s,{default:()=>u});var a=t(540),r=t(542),l=t(798),n=t(697),o=t(445),d=t(934),c=t(708),i=t(848);const u=function(){const[e,s]=(0,a.useState)([]),[t,u]=(0,a.useState)(!0),[m,x]=(0,a.useState)(null),[g,h]=(0,a.useState)(!1),[b,f]=(0,a.useState)(null),[p,y]=(0,a.useState)(""),[j,w]=(0,a.useState)({field:"name",direction:"asc"}),[N,v]=(0,a.useState)({name:"",amount:"",category:""});(0,a.useEffect)((()=>{C()}),[]);const C=async()=>{try{u(!0),x(null);const e=await fetch("/api/budgets");if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const t=await e.json();s(t)}catch(e){console.error("Error fetching budgets:",e),x(e.message)}finally{u(!1)}},k=e.filter((e=>e.name.toLowerCase().includes(p.toLowerCase())||e.category?.toLowerCase().includes(p.toLowerCase()))).sort(((e,s)=>{const t="asc"===j.direction?1:-1;return e[j.field]>s[j.field]?t:-t}));return t?(0,i.jsxs)("div",{className:"flex justify-center items-center h-screen",children:[(0,i.jsx)(l.A,{className:"animate-spin h-8 w-8 text-blue-500"}),(0,i.jsx)("span",{className:"ml-2",children:"Loading budgets..."})]}):m?(0,i.jsxs)("div",{className:"text-red-500 p-4 border border-red-200 rounded",children:[(0,i.jsxs)("p",{children:["Error loading budgets: ",m]}),(0,i.jsx)("button",{onClick:C,className:"mt-2 px-4 py-2 bg-red-100 text-red-800 rounded hover:bg-red-200",children:"Retry"})]}):(0,i.jsxs)("div",{className:"p-4",children:[(0,i.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,i.jsx)("h1",{className:"text-2xl font-bold",children:"Budgets"}),(0,i.jsxs)("button",{onClick:()=>h(!0),className:"bg-blue-500 text-white px-4 py-2 rounded-lg flex items-center",children:[(0,i.jsx)(n.A,{className:"w-4 h-4 mr-2"}),"Add Budget"]})]}),(0,i.jsx)("div",{className:"mb-4",children:(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsx)(o.A,{className:"absolute left-3 top-2.5 h-5 w-5 text-gray-400"}),(0,i.jsx)("input",{type:"text",placeholder:"Search budgets...",value:p,onChange:e=>y(e.target.value),className:"pl-10 pr-4 py-2 border rounded-lg w-full md:w-64"})]})}),k.length>0?(0,i.jsx)("div",{className:"grid gap-4 grid-cols-1 md:grid-cols-2 lg:grid-cols-3",children:k.map((t=>(0,i.jsx)("div",{className:"border p-4 rounded-lg shadow hover:shadow-md transition-shadow",children:(0,i.jsxs)("div",{className:"flex justify-between items-start",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h2",{className:"font-bold text-lg",children:t.name}),(0,i.jsxs)("p",{className:"text-gray-600",children:["Amount: $",t.amount]}),t.category&&(0,i.jsx)("span",{className:"inline-block px-2 py-1 mt-2 text-xs bg-gray-100 rounded",children:t.category})]}),(0,i.jsxs)("div",{className:"flex space-x-2",children:[(0,i.jsx)("button",{onClick:()=>{f(t),h(!0)},className:"text-gray-500 hover:text-gray-700",children:(0,i.jsx)(d.A,{className:"w-4 h-4"})}),(0,i.jsx)("button",{onClick:()=>(async t=>{if(window.confirm("Are you sure you want to delete this budget?"))try{if(!(await fetch(`/api/budgets/${t}`,{method:"DELETE"})).ok)throw new Error("Failed to delete budget");s(e.filter((e=>e.id!==t)))}catch(e){x(e.message)}})(t.id),className:"text-red-500 hover:text-red-700",children:(0,i.jsx)(c.A,{className:"w-4 h-4"})})]})]})},t.id)))}):(0,i.jsx)("p",{className:"text-center text-gray-500",children:"No budgets found."}),(0,i.jsxs)(r.lG,{open:g,onClose:()=>{h(!1),f(null),v({name:"",amount:"",category:""})},className:"relative z-50",children:[(0,i.jsx)("div",{className:"fixed inset-0 bg-black/30","aria-hidden":"true"}),(0,i.jsx)("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:(0,i.jsxs)(r.lG.Panel,{className:"w-full max-w-md rounded-lg bg-white p-6 shadow-xl",children:[(0,i.jsx)(r.lG.Title,{className:"text-lg font-medium mb-4",children:b?"Edit Budget":"Create New Budget"}),(0,i.jsxs)("form",{onSubmit:async t=>{t.preventDefault();try{const t=await fetch("/api/budgets",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(N)});if(!t.ok)throw new Error("Failed to create budget");const a=await t.json();s([...e,a]),h(!1),v({name:"",amount:"",category:""})}catch(e){x(e.message)}},children:[(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Name"}),(0,i.jsx)("input",{type:"text",value:b?.name||N.name,onChange:e=>v({...N,name:e.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Amount"}),(0,i.jsx)("input",{type:"number",value:b?.amount||N.amount,onChange:e=>v({...N,amount:e.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Category"}),(0,i.jsx)("input",{type:"text",value:b?.category||N.category,onChange:e=>v({...N,category:e.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]})]}),(0,i.jsxs)("div",{className:"mt-6 flex justify-end space-x-3",children:[(0,i.jsx)("button",{type:"button",onClick:()=>{h(!1),f(null),v({name:"",amount:"",category:""})},className:"px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Cancel"}),(0,i.jsx)("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-blue-500 rounded-md hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:b?"Save Changes":"Create Budget"})]})]})]})})]})]})}}}]);