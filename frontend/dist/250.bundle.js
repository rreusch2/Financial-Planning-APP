/*! For license information please see 250.bundle.js.LICENSE.txt */
"use strict";(self.webpackChunkpersonal_finance_app=self.webpackChunkpersonal_finance_app||[]).push([[250],{250:(e,t,a)=>{a.r(t),a.d(t,{default:()=>l});var s=a(540),r=a(102),n=a(107),d=a(798),i=a(848);const l=()=>{const[e,t]=(0,s.useState)([]),[a,l]=(0,s.useState)(!0),[c,o]=(0,s.useState)(null),[x,m]=(0,s.useState)(1),[u,p]=(0,s.useState)({field:"date",direction:"desc"}),[h,f]=(0,s.useState)(""),[g,y]=(0,s.useState)({startDate:new Date(Date.now()-2592e6).toISOString().split("T")[0],endDate:(new Date).toISOString().split("T")[0]});(0,s.useEffect)((()=>{b()}),[g,x,u]);const b=async()=>{try{l(!0),o(null);const e=await fetch(`/api/transactions?start_date=${g.startDate}&end_date=${g.endDate}&page=${x}&sort_by=${u.field}&sort_direction=${u.direction}`);if(!e.ok)throw new Error("Failed to fetch transactions");const a=await e.json();t(a.transactions)}catch(e){o(e.message),console.error("Error fetching transactions:",e)}finally{l(!1)}},j=e=>{p((t=>({field:e,direction:t.field===e&&"asc"===t.direction?"desc":"asc"})))},w=({field:e})=>u.field!==e?null:"asc"===u.direction?(0,i.jsx)(r.A,{className:"inline w-4 h-4"}):(0,i.jsx)(n.A,{className:"inline w-4 h-4"});return c?(0,i.jsx)("div",{className:"max-w-7xl mx-auto px-4 py-8",children:(0,i.jsx)("div",{className:"bg-red-50 border-l-4 border-red-400 p-4",children:(0,i.jsxs)("p",{className:"text-red-700",children:["Error: ",c]})})}):(0,i.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[(0,i.jsx)("h1",{className:"text-3xl font-bold mb-6",children:"All Transactions"}),(0,i.jsxs)("div",{className:"mb-6 flex gap-4 items-center",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),(0,i.jsx)("input",{type:"date",value:g.startDate,onChange:e=>y((t=>({...t,startDate:e.target.value}))),className:"rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),(0,i.jsx)("input",{type:"date",value:g.endDate,onChange:e=>y((t=>({...t,endDate:e.target.value}))),className:"rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),(0,i.jsxs)("div",{className:"ml-4",children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Search"}),(0,i.jsx)("input",{type:"text",value:h,onChange:e=>f(e.target.value),placeholder:"Search transactions...",className:"rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]})]}),(0,i.jsx)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:a?(0,i.jsx)("div",{className:"flex justify-center items-center p-8",children:(0,i.jsx)(d.A,{className:"animate-spin h-8 w-8 text-blue-500"})}):0===e.length?(0,i.jsx)("div",{className:"text-center p-8 text-gray-500",children:"No transactions found"}):(0,i.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,i.jsx)("thead",{className:"bg-gray-50",children:(0,i.jsxs)("tr",{children:[(0,i.jsxs)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",onClick:()=>j("date"),children:["Date ",(0,i.jsx)(w,{field:"date"})]}),(0,i.jsxs)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",onClick:()=>j("name"),children:["Description ",(0,i.jsx)(w,{field:"name"})]}),(0,i.jsxs)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",onClick:()=>j("category"),children:["Category ",(0,i.jsx)(w,{field:"category"})]}),(0,i.jsxs)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",onClick:()=>j("amount"),children:["Amount ",(0,i.jsx)(w,{field:"amount"})]})]})}),(0,i.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:e.filter((e=>""===h||e.name.toLowerCase().includes(h.toLowerCase())||e.category.toLowerCase().includes(h.toLowerCase()))).map((e=>(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(e.date).toLocaleDateString()}),(0,i.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.name}),(0,i.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.category}),(0,i.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium "+(e.amount<0?"text-red-600":"text-green-600"),children:["$",Math.abs(e.amount).toFixed(2)]})]},e.transaction_id)))})]})}),(0,i.jsxs)("div",{className:"mt-4 flex justify-end space-x-2",children:[(0,i.jsx)("button",{onClick:()=>m((e=>Math.max(1,e-1))),disabled:1===x,className:"px-4 py-2 border rounded-md disabled:opacity-50",children:"Previous"}),(0,i.jsx)("button",{onClick:()=>m((e=>e+1)),disabled:0===e.length,className:"px-4 py-2 border rounded-md disabled:opacity-50",children:"Next"})]})]})}},107:(e,t,a)=>{a.d(t,{A:()=>s});const s=(0,a(407).A)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},102:(e,t,a)=>{a.d(t,{A:()=>s});const s=(0,a(407).A)("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]])}}]);