"use strict";(self.webpackChunkpersonal_finance_app=self.webpackChunkpersonal_finance_app||[]).push([[228],{7228:(e,s,t)=>{t.r(s),t.d(s,{default:()=>O});var a=t(6540),n=t(7767),l=t(6166),r=t(4080),c=t(8818),i=t(211),o=t(964),d=t(5977),x=t(5842),m=t(1605),u=t(4848);const h=function({totalIncome:e,totalExpenses:s,netBalance:t}){return(0,u.jsxs)("div",{className:"p-4 bg-white rounded-lg shadow",children:[(0,u.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Account Summary"}),(0,u.jsxs)("div",{className:"flex justify-between",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("p",{className:"text-sm text-gray-500",children:"Total Income"}),(0,u.jsxs)("p",{className:"text-lg font-bold text-green-600",children:["$",e.toFixed(2)]})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("p",{className:"text-sm text-gray-500",children:"Total Expenses"}),(0,u.jsxs)("p",{className:"text-lg font-bold text-red-600",children:["$",s.toFixed(2)]})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("p",{className:"text-sm text-gray-500",children:"Net Balance"}),(0,u.jsxs)("p",{className:"text-lg font-bold text-blue-600",children:["$",t.toFixed(2)]})]})]})]})},p=({transactions:e})=>{const s=(0,n.Zp)(),t=e.slice(0,8);return e&&0!==e.length?(0,u.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg",children:[(0,u.jsx)("div",{className:"flex justify-between items-center mb-4",children:(0,u.jsx)("h2",{className:"text-2xl font-bold",children:"Recent Transactions"})}),(0,u.jsx)("div",{className:"overflow-hidden",children:(0,u.jsx)("div",{className:"bg-white rounded-lg border",children:t.map(((e,s)=>(0,u.jsxs)("div",{className:"flex items-center justify-between p-4 "+(s!==t.length-1?"border-b":""),children:[(0,u.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,u.jsx)("div",{className:"w-10 h-10 rounded-full flex items-center justify-center "+(e.amount<0?"bg-red-100":"bg-green-100"),children:(0,u.jsx)("span",{className:"text-lg "+(e.amount<0?"text-red-600":"text-green-600"),children:e.amount<0?"-":"+"})}),(0,u.jsxs)("div",{children:[(0,u.jsx)("p",{className:"font-semibold",children:e.name}),(0,u.jsx)("p",{className:"text-sm text-gray-500",children:e.date})]})]}),(0,u.jsxs)("div",{children:[(0,u.jsxs)("p",{className:"font-semibold "+(e.amount<0?"text-red-600":"text-green-600"),children:["$",Math.abs(e.amount).toFixed(2)]}),(0,u.jsx)("p",{className:"text-sm text-gray-500",children:e.category})]})]},e.id)))})}),(0,u.jsx)("div",{className:"mt-4 text-center",children:(0,u.jsx)("button",{onClick:()=>{s("/transactions")},className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"View All Transactions"})})]}):(0,u.jsx)("div",{className:"p-4",children:"No transactions available."})};var j=t(6252),y=t(6831),g=t(2477),b=t(7698),f=t(4653),v=t(404),N=t(9107),w=t(7984),k=t(3495),S=t(8687),A=t(7018),C=t(4198);const E=({expenses:e,handleExpenseClick:s})=>(0,u.jsx)("div",{className:"w-full h-96",children:(0,u.jsx)(f.u,{children:(0,u.jsxs)(v.E,{data:e,onClick:(e,t)=>s(e.activePayload[0].payload),children:[(0,u.jsx)(N.d,{strokeDasharray:"3 3"}),(0,u.jsx)(w.W,{dataKey:"date"}),(0,u.jsx)(k.h,{}),(0,u.jsx)(S.m,{}),(0,u.jsx)(A.s,{}),(0,u.jsx)(C.y,{dataKey:"amount",fill:"#8884d8",name:"Expense Amount"})]})})}),_=()=>{const[e,s]=(0,a.useState)([]),[t,n]=(0,a.useState)("monthly"),[l,r]=(0,a.useState)(!1),[c,i]=(0,a.useState)(!0),[o,d]=(0,a.useState)(null),[x,m]=(0,a.useState)(!1),[h,p]=(0,a.useState)(null);return(0,a.useEffect)((()=>{let e=!0;return(async()=>{try{i(!0),d(null);const a=await fetch(`/api/expenses_summary?period=${t}`);if(!a.ok)throw new Error(`HTTP error! status: ${a.status}`);const n=await a.json();e&&(s(n),r(!0))}catch(s){e&&d(s.message)}finally{e&&i(!1)}})(),()=>{e=!1}}),[t]),c?(0,u.jsx)("div",{className:"text-center p-4",children:"Loading expense data..."}):o?(0,u.jsxs)("div",{className:"text-red-500 p-4",children:["Error loading expenses: ",o]}):(0,u.jsxs)("div",{className:"p-4",children:[(0,u.jsx)("div",{className:"mb-4",children:(0,u.jsxs)("select",{value:t,onChange:e=>n(e.target.value),className:"border rounded p-2",children:[(0,u.jsx)("option",{value:"monthly",children:"Monthly"}),(0,u.jsx)("option",{value:"quarterly",children:"Quarterly"}),(0,u.jsx)("option",{value:"yearly",children:"Yearly"})]})}),l&&e.length>0?(0,u.jsx)(E,{expenses:e,handleExpenseClick:e=>{p(e),m(!0)}}):(0,u.jsx)("div",{className:"text-center p-4",children:"No expense data available"}),(0,u.jsxs)(j.A,{open:x,onClose:()=>m(!1),"aria-labelledby":"expense-dialog-title","aria-describedby":"expense-dialog-description",children:[(0,u.jsx)(y.A,{id:"expense-dialog-title",children:"Expense Details"}),(0,u.jsx)(g.A,{children:h?(0,u.jsxs)("div",{children:[(0,u.jsxs)(b.A,{variant:"body1",children:[(0,u.jsx)("strong",{children:"Date:"})," ",h.date]}),(0,u.jsxs)(b.A,{variant:"body1",children:[(0,u.jsx)("strong",{children:"Amount:"})," $",h.amount]}),(0,u.jsxs)(b.A,{variant:"body1",children:[(0,u.jsx)("strong",{children:"Category:"})," ",h.category]})]}):(0,u.jsx)(b.A,{variant:"body1",children:"No expense details available."})})]})]})};var F=t(9798),T=t(8445);const I=function(){const[e,s]=(0,a.useState)(""),[t,n]=(0,a.useState)(!1),[l,r]=(0,a.useState)(null),[c,i]=(0,a.useState)([]),[o,x]=(0,a.useState)(!1),[m,h]=(0,a.useState)(null),[p,j]=(0,a.useState)(""),[y,g]=(0,a.useState)("monthly"),[b,f]=(0,a.useState)(!1),[v,N]=(0,a.useState)(null),[w,k]=(0,a.useState)({field:"date",direction:"desc"}),S=async()=>{n(!0),r(null);try{const e=await fetch("/api/ai_advice");if(!e.ok)throw new Error("Failed to fetch AI advice");const t=await e.json();s(t.response||"No advice available at this time.")}catch(e){r(e.message||"An error occurred while fetching AI advice."),console.error("Error fetching AI advice:",e)}finally{n(!1)}};(0,a.useEffect)((()=>{S(),(async()=>{x(!0),h(null);try{const e=await fetch("/api/transactions");if(!e.ok)throw new Error("Failed to fetch expense data");const s=await e.json();i(s.transactions||[])}catch(e){h(e.message||"An error occurred while fetching expenses."),console.error("Error fetching expense data:",e)}finally{x(!1)}})()}),[]);const A=(c||[]).filter((e=>""===p||e.name.toLowerCase().includes(p.toLowerCase())||e.category.toLowerCase().includes(p.toLowerCase()))).sort(((e,s)=>{const t="asc"===w.direction?1:-1;return e[w.field]>s[w.field]?t:-t}));return o?(0,u.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,u.jsx)(F.A,{className:"animate-spin h-8 w-8 text-blue-500"})}):(0,u.jsxs)("div",{className:"space-y-6 p-4",children:[(0,u.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,u.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,u.jsx)("h2",{className:"text-xl font-semibold",children:"AI Financial Insights"}),(0,u.jsxs)("button",{onClick:S,className:"flex items-center gap-2 px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",disabled:t,children:[(0,u.jsx)(d.A,{className:"h-4 w-4 "+(t?"animate-spin":"")}),"Refresh Advice"]})]}),t?(0,u.jsx)("div",{className:"flex justify-center py-4",children:(0,u.jsx)(F.A,{className:"animate-spin h-6 w-6 text-blue-500"})}):l?(0,u.jsx)("div",{className:"text-red-500",children:l}):(0,u.jsx)("div",{className:"prose",children:(0,u.jsx)("p",{className:"text-gray-700",children:e})})]}),(0,u.jsx)("div",{className:"bg-white rounded-lg shadow",children:(0,u.jsxs)("div",{className:"p-4",children:[(0,u.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Expense Overview"}),(0,u.jsxs)("div",{className:"flex flex-wrap gap-4 mb-4",children:[(0,u.jsxs)("select",{value:y,onChange:e=>g(e.target.value),className:"border rounded p-2 focus:ring-2 focus:ring-blue-500",children:[(0,u.jsx)("option",{value:"monthly",children:"Monthly"}),(0,u.jsx)("option",{value:"quarterly",children:"Quarterly"}),(0,u.jsx)("option",{value:"yearly",children:"Yearly"})]}),(0,u.jsxs)("div",{className:"relative flex-1",children:[(0,u.jsx)("input",{type:"text",placeholder:"Search expenses...",value:p,onChange:e=>j(e.target.value),className:"w-full pl-10 pr-4 py-2 border rounded focus:ring-2 focus:ring-blue-500"}),(0,u.jsx)(T.A,{className:"absolute left-3 top-2.5 h-5 w-5 text-gray-400"})]})]}),(0,u.jsx)("div",{className:"grid gap-4 grid-cols-1 md:grid-cols-2 lg:grid-cols-3",children:A.map((e=>(0,u.jsxs)("div",{className:"p-4 border rounded-lg shadow cursor-pointer hover:bg-gray-50 transition-colors",onClick:()=>(e=>{N(e),f(!0)})(e),children:[(0,u.jsx)("h3",{className:"font-bold",children:e.name}),(0,u.jsxs)("p",{className:`text-${e.amount<0?"red":"green"}-600`,children:["$",Math.abs(e.amount).toFixed(2)]}),(0,u.jsx)("p",{className:"text-sm text-gray-500",children:e.date}),(0,u.jsx)("span",{className:"inline-block px-2 py-1 mt-2 text-xs bg-gray-100 rounded",children:e.category})]},e.transaction_id)))})]})})]})};var $=t(590),q=t(4934),L=t(2708);const P=()=>{const[e,s]=(0,a.useState)([]),[t,n]=(0,a.useState)(!1),[l,r]=(0,a.useState)({source_name:"",amount:"",frequency:"monthly",type:"salary"}),[c,i]=(0,a.useState)(null),[o,d]=(0,a.useState)(null);(0,a.useEffect)((()=>{x()}),[]);const x=async()=>{try{const e=await fetch("/api/income",{credentials:"include"}),t=await e.json();e.ok?Array.isArray(t)?(s(t),d(null)):(d("Received unexpected data format from server."),s([])):(d(t.error||"Failed to fetch income sources."),s([]))}catch(e){console.error("Error fetching income sources:",e),d("An error occurred while fetching income sources."),s([])}},m=(e,s)=>{switch(s){case"weekly":return 4*e;case"bi-weekly":return 2*e;case"monthly":default:return e;case"yearly":return e/12}},h=Array.isArray(e)?e.reduce(((e,s)=>e+m(parseFloat(s.amount),s.frequency)),0):0;return(0,u.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg",children:[(0,u.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,u.jsx)("h2",{className:"text-2xl font-bold",children:"Income Sources"}),(0,u.jsxs)("button",{onClick:()=>n(!0),className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors",children:[(0,u.jsx)($.A,{className:"w-5 h-5"}),"Add Income Source"]})]}),o&&(0,u.jsx)("div",{className:"mb-4 p-4 bg-red-100 text-red-700 rounded",children:o}),(0,u.jsxs)("div",{className:"space-y-4",children:[Array.isArray(e)&&e.map((e=>(0,u.jsx)("div",{className:"p-4 border rounded-lg hover:shadow-md transition-shadow",children:(0,u.jsxs)("div",{className:"flex justify-between items-start",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("h3",{className:"font-semibold text-lg",children:e.source_name}),(0,u.jsxs)("p",{className:"text-sm text-gray-600",children:["$",parseFloat(e.amount).toLocaleString()," • ",e.frequency]}),(0,u.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Monthly equivalent: $",m(parseFloat(e.amount),e.frequency).toLocaleString()]})]}),(0,u.jsxs)("div",{className:"flex gap-2",children:[(0,u.jsx)("button",{onClick:()=>{r(e),i(e.id),n(!0)},className:"p-2 text-blue-600 hover:bg-blue-50 rounded-full",children:(0,u.jsx)(q.A,{className:"w-4 h-4"})}),(0,u.jsx)("button",{onClick:async()=>{if(window.confirm("Are you sure you want to delete this income source?"))try{const s=await fetch(`/api/income/${e.id}`,{method:"DELETE",credentials:"include"});if(s.ok)x();else{const e=await s.json();d(e.error||"Failed to delete income source.")}}catch(e){console.error("Error deleting income source:",e),d("An error occurred while deleting the income source.")}},className:"p-2 text-red-600 hover:bg-red-50 rounded-full",children:(0,u.jsx)(L.A,{className:"w-4 h-4"})})]})]})},e.id))),Array.isArray(e)&&0===e.length&&(0,u.jsx)("p",{className:"text-center text-gray-500 py-4",children:"No income sources added yet. Click the button above to add one."}),Array.isArray(e)&&e.length>0&&(0,u.jsxs)("div",{className:"mt-6 p-4 bg-green-50 rounded-lg",children:[(0,u.jsx)("h3",{className:"font-semibold text-green-800",children:"Total Monthly Income"}),(0,u.jsxs)("p",{className:"text-2xl font-bold text-green-600",children:["$",h.toLocaleString()]})]})]}),t&&(0,u.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4",children:(0,u.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-md w-full",children:[(0,u.jsx)("h3",{className:"text-xl font-bold mb-4",children:c?"Edit Income Source":"Add Income Source"}),(0,u.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{const e=c?`/api/income/${c}`:"/api/income",s=await fetch(e,{method:c?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)});if(s.ok)x(),n(!1),r({source_name:"",amount:"",frequency:"monthly",type:"salary"}),i(null);else{const e=await s.json();d(e.error||"Failed to save income source.")}}catch(e){console.error("Error saving income source:",e),d("An error occurred while saving the income source.")}},className:"space-y-4",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Source Name"}),(0,u.jsx)("input",{type:"text",value:l.source_name,onChange:e=>r({...l,source_name:e.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Amount"}),(0,u.jsx)("input",{type:"number",value:l.amount,onChange:e=>r({...l,amount:e.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Frequency"}),(0,u.jsxs)("select",{value:l.frequency,onChange:e=>r({...l,frequency:e.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[(0,u.jsx)("option",{value:"weekly",children:"Weekly"}),(0,u.jsx)("option",{value:"bi-weekly",children:"Bi-weekly"}),(0,u.jsx)("option",{value:"monthly",children:"Monthly"}),(0,u.jsx)("option",{value:"yearly",children:"Yearly"})]})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Type"}),(0,u.jsxs)("select",{value:l.type,onChange:e=>r({...l,type:e.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[(0,u.jsx)("option",{value:"salary",children:"Salary"}),(0,u.jsx)("option",{value:"hourly",children:"Hourly Wage"}),(0,u.jsx)("option",{value:"investment",children:"Investment"}),(0,u.jsx)("option",{value:"business",children:"Business"}),(0,u.jsx)("option",{value:"freelance",children:"Freelance"}),(0,u.jsx)("option",{value:"other",children:"Other"})]})]}),(0,u.jsxs)("div",{className:"flex gap-2 justify-end mt-6",children:[(0,u.jsx)("button",{type:"button",onClick:()=>{n(!1),r({source_name:"",amount:"",frequency:"monthly",type:"salary"}),i(null),d(null)},className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-md",children:"Cancel"}),(0,u.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:c?"Save Changes":"Add Income"})]})]})]})})]})};var D=t(7946),B=t(9804);const M=({onSuccess:e})=>{const[s,t]=(0,a.useState)(null),[n,l]=(0,a.useState)("idle"),[r,c]=(0,a.useState)(null),i=(0,a.useCallback)((e=>{if(window.Plaid)o(e);else{const s=document.createElement("script");s.src="https://cdnjs.cloudflare.com/ajax/libs/plaid-link/2.0.0/link-initialize.js",s.async=!0,s.onload=()=>{o(e)},document.body.appendChild(s)}}),[]),o=(0,a.useCallback)((s=>{const t={token:s,onSuccess:async(s,t)=>{try{if(l("connecting"),!(await fetch("/api/exchange_public_token",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({public_token:s,institution:t.institution,accounts:t.accounts})})).ok)throw new Error("Failed to exchange token");l("success"),e&&e(t)}catch(e){console.error("Error in Plaid flow:",e),c(e.message),l("error")}},onExit:e=>{e&&(c(e.message),l("error"))}};return window.Plaid.create(t)}),[e]),d=(0,a.useCallback)((async()=>{try{l("loading"),c(null);const e=await fetch("/api/create_link_token",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const s=await e.json();if(!s.link_token)throw new Error("No link token received");t(s.link_token),l("ready"),i(s.link_token)}catch(e){console.error("Error fetching link token:",e),c(e.message),l("error")}}),[i]);(0,a.useEffect)((()=>{d()}),[d]);const x=(0,a.useCallback)((()=>{window.Plaid&&o(s).open()}),[s,o]);return(0,u.jsx)("div",{className:"plaid-link-wrapper",children:"loading"===n?(0,u.jsxs)("button",{disabled:!0,className:"px-4 py-2 bg-gray-400 text-white rounded-md flex items-center",children:[(0,u.jsx)("div",{className:"animate-spin mr-2",children:"⟳"}),"Loading..."]}):"error"===n?(0,u.jsxs)("div",{className:"flex flex-col items-start",children:[(0,u.jsxs)("button",{onClick:d,className:"px-4 py-2 bg-red-600 text-white rounded-md flex items-center",children:[(0,u.jsx)(D.A,{className:"w-4 h-4 mr-2"}),"Retry Connection"]}),r&&(0,u.jsx)("p",{className:"text-red-500 text-sm mt-1",children:r})]}):"success"===n?(0,u.jsxs)("button",{disabled:!0,className:"px-4 py-2 bg-green-600 text-white rounded-md flex items-center",children:[(0,u.jsx)(B.A,{className:"w-4 h-4 mr-2"}),"Connected"]}):(0,u.jsx)("button",{onClick:x,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Connect Bank Account"})})},O=function(){const[e,s]=(0,a.useState)(0),[t,j]=(0,a.useState)(0),[y,g]=(0,a.useState)(0),[b,f]=(0,a.useState)([]),[v,N]=(0,a.useState)(null),[w,k]=(0,a.useState)(!1),[S,A]=(0,a.useState)(null),[C,E]=(0,a.useState)(null),F=(0,n.Zp)(),T=async()=>{try{const e=await fetch("/api/dashboard",{credentials:"include"}),t=await e.json();console.log("Dashboard Data:",t),t.error?(console.error("Error fetching dashboard data:",t.error),N(t.error)):(s(t.total_income||0),j(t.total_expenses||0),g(t.net_balance||0),f(t.transactions||[]),N(null))}catch(e){console.error("Error fetching dashboard data:",e),N("Failed to fetch dashboard data.")}};return w?(0,u.jsx)(m.A,{}):v?(0,u.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,u.jsxs)("div",{children:[(0,u.jsx)("p",{className:"text-red-500",children:v}),(0,u.jsx)("button",{onClick:T,className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Retry"})]})}):(0,u.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,u.jsx)("nav",{className:"bg-white shadow-sm sticky top-0 z-10",children:(0,u.jsx)("div",{className:"max-w-7xl mx-auto px-4",children:(0,u.jsxs)("div",{className:"flex items-center justify-between h-16",children:[(0,u.jsx)("div",{className:"flex items-center",children:(0,u.jsx)("span",{className:"text-xl font-bold text-blue-600",children:"FinanceTracker"})}),(0,u.jsxs)("div",{className:"hidden md:flex space-x-4",children:[(0,u.jsxs)("button",{onClick:()=>F("/"),className:"flex items-center px-3 py-2 rounded-md text-gray-700 hover:bg-gray-100",children:[(0,u.jsx)(l.A,{className:"w-5 h-5 mr-2"}),"Dashboard"]}),(0,u.jsxs)("button",{onClick:()=>F("/investments"),className:"flex items-center px-3 py-2 rounded-md text-gray-700 hover:bg-gray-100",children:[(0,u.jsx)(r.A,{className:"w-5 h-5 mr-2"}),"Investments"]}),(0,u.jsxs)("button",{onClick:()=>F("/budgets"),className:"flex items-center px-3 py-2 rounded-md text-gray-700 hover:bg-gray-100",children:[(0,u.jsx)(c.A,{className:"w-5 h-5 mr-2"}),"Budgets"]}),(0,u.jsxs)("button",{onClick:()=>F("/credit-score"),className:"flex items-center px-3 py-2 rounded-md text-gray-700 hover:bg-gray-100",children:[(0,u.jsx)(i.A,{className:"w-5 h-5 mr-2"}),"Credit Score"]}),(0,u.jsxs)("button",{onClick:()=>F("/settings"),className:"flex items-center px-3 py-2 rounded-md text-gray-700 hover:bg-gray-100",children:[(0,u.jsx)(o.A,{className:"w-5 h-5 mr-2"}),"Settings"]})]})]})})}),(0,u.jsx)("div",{className:"max-w-7xl mx-auto px-4 py-8",children:(0,u.jsxs)(x.A,{children:[(0,u.jsxs)("div",{className:"grid gap-6 md:grid-cols-2",children:[(0,u.jsx)(h,{totalIncome:e,totalExpenses:t,netBalance:y}),(0,u.jsx)(P,{totalIncome:e})]}),(0,u.jsx)("div",{className:"mt-6",children:(0,u.jsx)(p,{transactions:b})}),(0,u.jsxs)("div",{className:"grid gap-6 md:grid-cols-2 mt-6",children:[(0,u.jsx)(_,{}),(0,u.jsx)(I,{})]}),(0,u.jsx)("div",{className:"mt-6 p-4 bg-white rounded-lg shadow-lg",children:(0,u.jsxs)("div",{className:"flex items-center justify-between",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("h3",{className:"text-lg font-semibold",children:"Bank Connection"}),(0,u.jsxs)("p",{className:"text-sm text-gray-600",children:["Last synced: ",S?S.toLocaleString():"Never"]}),C&&(0,u.jsx)("p",{className:"text-sm text-red-500 mt-1",children:C})," "]}),(0,u.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,u.jsx)(M,{onSuccess:()=>{T(),A(new Date)}}),(0,u.jsx)("button",{onClick:async()=>{try{if(k(!0),!(await fetch("/api/sync-bank",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include"})).ok)throw new Error("Failed to sync bank data");await T(),A(new Date),E(null)}catch(e){E(e.message)}finally{k(!1)}},disabled:w,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 \n                    flex items-center "+(w?"opacity-50 cursor-not-allowed":""),children:w?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(d.A,{className:"w-4 h-4 mr-2 animate-spin"}),"Syncing..."]}):(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(d.A,{className:"w-4 h-4 mr-2"}),"Sync Now"]})})]})]})})]})})]})}}}]);