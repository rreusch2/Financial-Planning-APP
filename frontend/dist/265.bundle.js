/*! For license information please see 265.bundle.js.LICENSE.txt */
(self.webpackChunkpersonal_finance_app=self.webpackChunkpersonal_finance_app||[]).push([[265],{265:(e,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>C});var r=t(540),a=t(767),o=t(87),i=t(848);const s=function({totalIncome:e=0,totalExpenses:n=0,netBalance:t=0}){return(0,i.jsxs)("div",{className:"p-4 bg-white rounded-lg shadow",children:[(0,i.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Account Summary"}),(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-sm text-gray-500",children:"Total Income"}),(0,i.jsxs)("p",{className:"text-lg font-bold text-green-600",children:["$",e.toFixed(2)]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-sm text-gray-500",children:"Total Expenses"}),(0,i.jsxs)("p",{className:"text-lg font-bold text-red-600",children:["$",n.toFixed(2)]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-sm text-gray-500",children:"Net Balance"}),(0,i.jsxs)("p",{className:"text-lg font-bold text-blue-600",children:["$",t.toFixed(2)]})]})]})]})};var c=t(977),l=t(798),d=t(407);const u=(0,d.A)("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]),p=(0,d.A)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),f=(0,d.A)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),h=()=>{const[e,n]=(0,r.useState)([]),[t,a]=(0,r.useState)(!1),[o,s]=(0,r.useState)(null),d=async()=>{a(!0),s(null);try{const e=await fetch("/api/ai_advice");if(!e.ok)throw new Error("Failed to fetch AI advice");const t=await e.json(),r=Array.isArray(t.advice)?t.advice:"string"==typeof t.advice?[{type:"info",title:"AI Advice",description:t.advice}]:[];n(r)}catch(e){s(e.message||"An error occurred while fetching AI advice."),console.error("Error fetching AI advice:",e)}finally{a(!1)}};return(0,r.useEffect)((()=>{d()}),[]),(0,i.jsxs)("div",{className:"p-6 bg-white rounded-lg shadow-md",children:[(0,i.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,i.jsx)("h2",{className:"text-xl font-semibold",children:"AI Financial Insights"}),(0,i.jsxs)("button",{className:"flex items-center gap-2 bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600",onClick:d,disabled:t,children:[(0,i.jsx)(c.A,{className:"h-4 w-4 "+(t?"animate-spin":"")}),"Refresh"]})]}),t?(0,i.jsx)("div",{className:"flex justify-center",children:(0,i.jsx)(l.A,{className:"animate-spin text-blue-500 h-6 w-6"})}):o?(0,i.jsx)("p",{className:"text-red-500",children:o}):e.length>0?(0,i.jsx)("div",{className:"space-y-4",children:e.map(((e,n)=>(0,i.jsxs)("div",{className:"advice-card",children:[(0,i.jsxs)("div",{className:"advice-card-icon",children:["savings"===e.type&&(0,i.jsx)(u,{className:"text-yellow-500"}),"concern"===e.type&&(0,i.jsx)(p,{className:"text-red-500"}),"tip"===e.type&&(0,i.jsx)(f,{className:"text-green-500"}),"info"===e.type&&(0,i.jsx)(u,{className:"text-gray-400"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{className:"font-medium",children:e.title}),(0,i.jsx)("p",{className:"text-sm text-gray-600",children:e.description})]})]},n)))}):(0,i.jsx)("p",{className:"text-gray-500",children:"No advice was generated."})]})};var x=t(947);const b=()=>{const[e,n]=(0,r.useState)(null),[t,a]=(0,r.useState)(!1),[o,s]=(0,r.useState)(null),d=(0,r.useCallback)((async()=>{try{a(!0);const e=await fetch("http://localhost:5028/api/create_link_token",{method:"GET",credentials:"include"});if(!e.ok)throw new Error("Failed to generate link token");const{link_token:t}=await e.json();n(t)}catch(e){console.error("Error generating link token:",e),s(e.message)}finally{a(!1)}}),[]);(0,r.useEffect)((()=>{d()}),[d]);const u=(0,r.useCallback)((async(e,n)=>{try{if(a(!0),!(await fetch("http://localhost:5028/api/exchange_public_token",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({public_token:e})})).ok)throw new Error("Failed to exchange token");await p(),window.location.reload()}catch(e){console.error("Error linking bank:",e),s(e.message)}finally{a(!1)}}),[]),p=async()=>{try{if(!(await fetch("http://localhost:5028/api/transactions/sync",{method:"POST",credentials:"include"})).ok)throw new Error("Failed to sync transactions")}catch(e){console.error("Error syncing transactions:",e),s(e.message)}},{open:f,ready:h}=(0,x.usePlaidLink)({token:e,onSuccess:u,onExit:e=>{e&&s(e.message)}});return t?(0,i.jsxs)("button",{className:"flex items-center px-4 py-2 bg-gray-200 text-gray-500 rounded cursor-not-allowed",disabled:!0,children:[(0,i.jsx)(l.A,{className:"animate-spin mr-2 h-4 w-4"}),"Connecting..."]}):o?(0,i.jsxs)("div",{className:"text-red-500",children:[(0,i.jsx)("p",{children:o}),(0,i.jsxs)("button",{onClick:d,className:"mt-2 flex items-center px-4 py-2 bg-red-100 text-red-600 rounded hover:bg-red-200",children:[(0,i.jsx)(c.A,{className:"mr-2 h-4 w-4"}),"Retry"]})]}):(0,i.jsx)("button",{onClick:()=>f(),disabled:!h||!e,className:"px-4 py-2 rounded "+(h&&e?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-200 text-gray-500 cursor-not-allowed"),children:"Connect Your Bank Account"})};var y=t(72),m=t.n(y),g=t(825),v=t.n(g),_=t(659),w=t.n(_),k=t(56),j=t.n(k),E=t(159),N=t.n(E),O=t(113),S=t.n(O),I=t(942),A={};A.styleTagTransform=S(),A.setAttributes=j(),A.insert=w().bind(null,"head"),A.domAPI=v(),A.insertStyleElement=N(),m()(I.Ay,A);const P=I.Ay&&I.Ay.locals?I.Ay.locals:void 0,C=()=>{const[e,n]=(0,r.useState)({totalIncome:0,totalExpenses:0,netBalance:0}),[t,l]=(0,r.useState)("idle"),[d,u]=(0,r.useState)(!1),[p,f]=(0,r.useState)([]),[x,y]=(0,r.useState)(1e4),[m,g]=(0,r.useState)(3e3),v=(0,a.Zp)(),_=(0,r.useCallback)((async()=>{try{const e=await o.FH.fetchAccountSummary();n({totalIncome:e.total_income||0,totalExpenses:e.total_expenses||0,netBalance:e.net_balance||0})}catch(e){console.error("Error fetching dashboard data:",e),alert("Failed to fetch dashboard data. Please try again later.")}}),[]),w=(0,r.useCallback)((async()=>{try{const e=await o.FH.fetchRecentTransactions();f(e.transactions||[])}catch(e){console.error("Error fetching recent transactions:",e),f([])}}),[]),k=(0,r.useCallback)((async()=>{try{const e=await o.FH.checkBankConnection();u(e.connected||!1)}catch(e){console.error("Error checking bank connection:",e)}}),[]);return(0,r.useEffect)((()=>{(async()=>{try{if((await o.FH.checkAuth()).authenticated){const e=await o.FH.checkBankConnection();u(e.has_plaid_connection),_(),w()}else v("/login")}catch(e){console.error("Error validating session:",e),v("/login")}})()}),[v,k,_,w]),(0,i.jsxs)("div",{className:P.dashboardContainer,children:[(0,i.jsxs)("header",{className:P.welcomeBanner,children:[(0,i.jsx)("h1",{children:"Welcome, Reid!"}),(0,i.jsx)("p",{children:"Take control of your financial future."})]}),(0,i.jsxs)("main",{children:[(0,i.jsxs)("div",{className:P.card,children:[(0,i.jsx)("h3",{children:"Bank Connection"}),(0,i.jsx)("p",{children:d?"Your bank account is connected.":"Connect your bank to start tracking your finances."}),(0,i.jsxs)("div",{children:[(0,i.jsx)(b,{onSuccess:_}),d&&(0,i.jsxs)("button",{onClick:async()=>{if(d){l("syncing");try{await o.FH.syncTransactions(),await _(),await w(),l("success"),setTimeout((()=>l("idle")),3e3)}catch{l("error")}}},className:`${P.buttonPrimary} ${"syncing"===t?P.disabled:""}`,children:[(0,i.jsx)(c.A,{className:"syncing"===t?P.spin:""}),"syncing"===t?"Syncing...":"Sync Now"]})]})]}),(0,i.jsx)("div",{className:P.card,children:(0,i.jsx)(s,{...e})}),(0,i.jsx)("div",{className:P.card,children:(0,i.jsx)(h,{dashboardData:e})}),(0,i.jsxs)("div",{className:P.card,children:[(0,i.jsx)("h2",{children:"Savings Progress"}),(0,i.jsx)("div",{className:P.progressBar,children:(0,i.jsx)("div",{className:P.progressBarFilled,style:{width:m/x*100+"%"}})}),(0,i.jsxs)("p",{children:["$",m.toFixed(2)," saved out of $",x.toFixed(2)]})]})]})]})}},942:(e,n,t)=>{"use strict";t.d(n,{Ay:()=>s});var r=t(601),a=t.n(r),o=t(314),i=t.n(o)()(a());i.push([e.id,"/* General Dashboard Styles */\n.dashboard-module__dashboardContainer__xp3kw {\n  padding: 20px;\n  max-width: 1200px;\n  margin: 0 auto;\n}\n\n/* Welcome Banner */\n.dashboard-module__welcomeBanner__N8q8Q {\n  background: linear-gradient(90deg, #0072ff, #00c6ff);\n  color: white;\n  text-align: center;\n  padding: 40px 20px;\n  border-radius: 10px;\n  margin-bottom: 20px;\n}\n\n.dashboard-module__welcomeBanner__N8q8Q h1 {\n  font-size: 2.5rem;\n  margin-bottom: 10px;\n}\n\n.dashboard-module__welcomeBanner__N8q8Q p {\n  font-size: 1.2rem;\n}\n\n/* Cards */\n.dashboard-module__card__PQKTq {\n  background: white;\n  border-radius: 10px;\n  padding: 20px;\n  box-shadow: 0px 4px 6px rgba(0, 0, 0, 0.1);\n}\n\n.dashboard-module__card__PQKTq h2 {\n  font-size: 1.5rem;\n  margin-bottom: 10px;\n}\n\n/* Action Buttons */\n.dashboard-module__buttonPrimary__otUWO {\n  background: #0072ff;\n  color: white;\n  padding: 10px 20px;\n  border: none;\n  border-radius: 5px;\n  cursor: pointer;\n  transition: background 0.3s;\n}\n\n.dashboard-module__buttonPrimary__otUWO:hover {\n  background: #005bbb;\n}\n\n/* Progress Bar */\n.dashboard-module__progressBar__Ycm2J {\n  background: #e5e7eb;\n  border-radius: 10px;\n  height: 20px;\n  position: relative;\n  overflow: hidden;\n}\n\n.dashboard-module__progressBarFilled__CN66Z {\n  background: #22c55e;\n  height: 100%;\n  transition: width 0.3s;\n}\n\n/* AI Advice Styles */\n.dashboard-module__adviceCard__sUDZq {\n  display: flex;\n  align-items: start;\n  padding: 16px;\n  background: #f9fafb;\n  border-radius: 8px;\n  box-shadow: 0px 4px 6px rgba(0, 0, 0, 0.1);\n  transition: box-shadow 0.2s, transform 0.2s;\n}\n\n.dashboard-module__adviceCard__sUDZq:hover {\n  box-shadow: 0px 6px 8px rgba(0, 0, 0, 0.15);\n  transform: translateY(-2px);\n}\n\n.dashboard-module__adviceCardIcon__NVI6s {\n  margin-right: 16px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 40px;\n  width: 40px;\n  background-color: #f3f4f6;\n  border-radius: 50%;\n}\n\n.dashboard-module__adviceCard__sUDZq h3 {\n  font-size: 1rem;\n  font-weight: 500;\n  color: #1f2937;\n}\n\n.dashboard-module__adviceCard__sUDZq p {\n  font-size: 0.875rem;\n  color: #4b5563;\n}\n",""]);const s=i},977:(e,n,t)=>{"use strict";t.d(n,{A:()=>r});const r=(0,t(407).A)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},947:function(e,n,t){!function(e,n){"use strict";var r="default"in n?n.default:n;function a(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function o(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?a(Object(t),!0).forEach((function(n){i(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function i(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function s(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}function c(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,a,o=[],i=!0,s=!1;try{for(t=t.call(e);!(i=(r=t.next()).done)&&(o.push(r.value),!n||o.length!==n);i=!0);}catch(e){s=!0,a=e}finally{try{i||null==t.return||t.return()}finally{if(s)throw a}}return o}}(e,n)||function(e,n){if(e){if("string"==typeof e)return l(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?l(e,n):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}var d="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==t.g?t.g:"undefined"!=typeof self?self:{};function u(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function p(e,n){return e(n={exports:{}},n.exports),n.exports}var f=p((function(e,n){var t=d&&d.__rest||function(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)n.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(t[r[a]]=e[r[a]])}return t};Object.defineProperty(n,"__esModule",{value:!0}),n.scripts=void 0,n.scripts={};var a=function(e){var t=document.querySelector('script[src="'+e+'"]');if(t)return n.scripts[e]={loading:!1,error:null,scriptEl:t}};n.default=function(e){var i=e.src,s=e.checkForExisting,c=void 0!==s&&s,l=t(e,["src","checkForExisting"]),d=i?n.scripts[i]:void 0;!d&&c&&i&&o&&(d=a(i));var u=(0,r.useState)(d?d.loading:Boolean(i)),p=u[0],f=u[1],h=(0,r.useState)(d?d.error:null),x=h[0],b=h[1],y=(0,r.useState)(!1),m=y[0],g=y[1];return(0,r.useEffect)((function(){if(o&&i&&!m&&!x){var e;!(d=n.scripts[i])&&c&&(d=a(i)),d?e=d.scriptEl:((e=document.createElement("script")).src=i,Object.keys(l).forEach((function(n){void 0===e[n]?e.setAttribute(n,l[n]):e[n]=l[n]})),d=n.scripts[i]={loading:!0,error:null,scriptEl:e});var t=function(){d&&(d.loading=!1),f(!1),g(!0)},r=function(e){d&&(d.error=e),b(e)};return e.addEventListener("load",t),e.addEventListener("error",r),document.body.appendChild(e),function(){e.removeEventListener("load",t),e.removeEventListener("error",r),d&&d.loading&&(e.remove(),delete n.scripts[i])}}}),[i]),[p,x]};var o="undefined"!=typeof window&&void 0!==window.document}));u(f),f.scripts;var h=p((function(e,n){var t=d&&d.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.scripts=n.default=void 0,Object.defineProperty(n,"default",{enumerable:!0,get:function(){return t(f).default}}),Object.defineProperty(n,"scripts",{enumerable:!0,get:function(){return f.scripts}})})),x=u(h),b=(h.scripts,function(e,n,t){var r={};return delete Object.assign(r,e,i({},t,e[n]))[n],r}),y=function(e,n){return function(e,n){var t={plaid:null,open:!1,onExitCallback:null};if("undefined"==typeof window||!window.Plaid)throw new Error("Plaid not loaded");return t.plaid=n(o(o({},e),{},{onExit:function(n,r){t.open=!1,e.onExit&&e.onExit(n,r),t.onExitCallback&&t.onExitCallback()}})),{open:function(){t.plaid&&(t.open=!0,t.onExitCallback=null,t.plaid.open())},submit:function(e){t.plaid&&t.plaid.submit(e)},exit:function(e,n){t.open&&t.plaid?(t.onExitCallback=n,t.plaid.exit(e),e&&e.force&&(t.open=!1)):n&&n()},destroy:function(){t.plaid&&(t.plaid.destroy(),t.plaid=null)}}}(b(e,"publicKey","key"),n)},m="https://cdn.plaid.com/link/v2/stable/link-initialize.js",g=function(){},v=function(e){var t=c(x({src:m,checkForExisting:!0}),2),r=t[0],a=t[1],i=c(n.useState(null),2),s=i[0],l=i[1],d=c(n.useState(!1),2),u=d[0],p=d[1],f=(e.product||[]).slice().sort().join(",");n.useEffect((function(){if(!r&&(e.token||e.publicKey||e.receivedRedirectUri)){if(!a&&window.Plaid){null!=s&&s.exit({force:!0},(function(){return s.destroy()}));var n=y(o(o({},e),{},{onLoad:function(){p(!0),e.onLoad&&e.onLoad()}}),window.Plaid.create);return l(n),function(){return n.exit({force:!0},(function(){return n.destroy()}))}}console.error("Error loading Plaid",a)}}),[r,a,e.publicKey,e.token,f]);return{error:a,ready:null!=s&&(!r||u),submit:s?s.submit:g,exit:s?s.exit:g,open:s?s.open:function(){e.token||console.warn("react-plaid-link: You cannot call open() without a valid token supplied to usePlaidLink. This is a no-op.")}}},_=["children","style","className"],w=function(e){var n=e.children,t=e.style,a=e.className,i=s(e,_),c=v(o({},i)),l=c.error,d=c.open;return r.createElement("button",{disabled:Boolean(l),type:"button",className:a,style:o({padding:"6px 4px",outline:"none",background:"#FFFFFF",border:"2px solid #F1F1F1",borderRadius:"4px"},t),onClick:function(){return d()}},n)};w.displayName="PlaidLink";var k;(k=e.PlaidLinkStableEvent||(e.PlaidLinkStableEvent={})).OPEN="OPEN",k.EXIT="EXIT",k.HANDOFF="HANDOFF",k.SELECT_INSTITUTION="SELECT_INSTITUTION",k.ERROR="ERROR",k.BANK_INCOME_INSIGHTS_COMPLETED="BANK_INCOME_INSIGHTS_COMPLETED",k.IDENTITY_VERIFICATION_PASS_SESSION="IDENTITY_VERIFICATION_PASS_SESSION",k.IDENTITY_VERIFICATION_FAIL_SESSION="IDENTITY_VERIFICATION_FAIL_SESSION",e.PlaidEmbeddedLink=function(e){var t=e.style,a=e.className,i=e.onSuccess,s=e.onExit,l=e.onLoad,d=e.onEvent,u=e.token,p=e.receivedRedirectUri,f=n.useMemo((function(){return{onSuccess:i,onExit:s,onLoad:l,onEvent:d,token:u,receivedRedirectUri:p}}),[i,s,l,d,u,p]),h=c(x({src:m,checkForExisting:!0}),2),b=h[0],y=h[1],g=n.useRef(null);return n.useEffect((function(){if(!b)if(!y&&window.Plaid){if(null!=f.token&&""!=f.token){var e=window.Plaid.createEmbedded(o({},f),g.current).destroy;return function(){e()}}console.error("A token is required to initialize embedded Plaid Link")}else console.error("Error loading Plaid",y)}),[b,y,f,g]),r.createElement("div",{style:t,className:a,ref:g})},e.PlaidLink=w,e.usePlaidLink=v,Object.defineProperty(e,"__esModule",{value:!0})}(n,t(540))}}]);